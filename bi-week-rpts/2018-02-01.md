---
layout: default
---

# RISC-V 双周简报 (2018-02-01)

要点新闻：


## RV新闻


## 技术讨论

### 为RISC-V添加进程间隔离表

继幽灵漏洞被曝光后，RISC-V社区提出了一个进程间数据隔离的方案。
幽灵漏洞实际上是一个很难防御的问题。
一方面幽灵漏洞依赖于预测执行，而预测执行是高性能处理器不可或缺的特性之一。
另外，幽灵利用预测执行去访问本来不应访问的数据。
这里的数据很可能不受硬件保护，比如说攻击者和被攻击数据在同一个优先级。
但是软件保护则不太可能去阻止预测执行对数据的访问。
这便揭示了一个关键问题，现在的计算机系统缺少一种比页更细粒度的保护和隔离机制。

RISC-V社区提出的进程间数据隔离表即是为了这个目的而提出。
它建议使用一个类似页表的结构，构造一张平行的表。
在页表树的叶子节点，数据隔离表记录页内数据区间的权限标志和访问控制。
每一个页表项大小的隔离项可将一个页分为4个独立区间。
这样就将保护粒度降低到1/4页。

RISC-V社区针对该提议展开了非常仔细的讨论，其中有很多观点都非常有意思。

> isolation is easy, sharing is hard.
隔离比较简单，但是共享却很难（简单隔离比较容易做到，但是考虑共享数据的隔离问题，就变得复杂了）。

>  The software problems are a lot harder, because most programming languages really like being able to share *objects* (whatever that means in the language), not page sized memory buffers, between components.
关于隔离的软件问题更加复杂。这是因为编程语言（程序）希望能共享类似对象的数据结构，而不是一个以页为单位的内存缓冲区。

> It’s worth noting that the result from Mondrian Memory Protection was a clear statement that useful translation boundaries and useful protection boundaries rarely align.  This is particularly apparent on modern systems, where superpages give a significant reduction in TLB pressure, but give you 2MB+ translations, which are far too large for any kind of fine-grained protection.
地址翻译和内存保护的边界往往不统一。这个问题在现代系统中更加突出。
比如说为了减少地址翻译对TLB的影响，现代系统倾向于给进程分配大页，而大页对于内存保护来说简直是太大了！

具体的讨论请参看：https://groups.google.com/a/groups.riscv.org/d/msg/isa-dev/l08WGeesdB4/UDTa8W6mAQAJ


### 为Rocket和BOOM添加预取机制

在RISC-V的硬件邮件列表中，Max Hayden Chiz详细讨论了如何为Rocket和BOOM添加硬件预取机制。
他给出了很多预取设计需要考虑的问题和大量的参考文献：

+ 二级缓存缓存的置换算法应当考虑预取的情况。
+ RRIP with PACman: https://people.csail.mit.edu/emer/papers/2011.12.micro.pacman.pdf
+ 两个数据预取竞赛： https://www.jilp.org/vol13/index.html, https://www.jilp.org/dpc/online/DPC-1%20Program.htm 和 http://comparch-conf.gatech.edu/dpc2/final_program.html
+ the 1st DPC: https://www.jilp.org/vol13/v13paper4.pdf
+ VLDP https://www.cs.utah.edu/~rajeev/pubs/micro15m.pdf
+ 现代乱序处理器已经能隐藏一级缓存的miss延时，所以一级缓存的预取意义不大。
> As for the L1 cache, the general belief in the modern literature is that it's less important because an OoO core can generally hide the latency of an L1 miss. 
+ SMS: http://www.jilp.org/vol13/v13paper8.pdf
+ Domino prefetcher: http://ieeexplore.ieee.org/document/7820158/ 和 http://cs.ipm.ac.ir/~plotfi/papers/domino_hpca18.pdf

在和Andrew Waterman讨论之后，Max准备先实现一个prefetch buffer，一个在一级和二级缓存之间的buffer，由一级缓存的miss来触发预取并存放数据。
当一级缓存miss时，则可以更快地从prefetch buffer读到数据。
这样设计的好处是预取模块暂时和其他模块没有直接联系，具有更好的模块性。

### 对一个in-order处理添加10%的面积能达到一个OoO处理器90%的性能？

最近有人在征集可以用于硕士开题的关于RISC-V的点子。
于是这么一个脑洞清新的题目就被提出来了。
大概意思是，用两个in-order的处理器合并在一起做成一个OoO处理器，就能获得大多数OoO的性能。
具体的想法可以看这篇文章：http://www.cs.virginia.edu/~skadron/Papers/boyer_federation_taco.pdf

另外，有人也提出，可以做基于FPGA的TLB优化。
FPGA有大量的BRAM，但是CAM实现非常的消耗资源。
传统使用CAM来做associative的TLB在FPGA上性能不高。
但是我们可以用BRAM来做directly mapped缓存，使用其他方法（the nearly-associative memory from UPenn）提高directly mapped缓存的associativity，则性能就能匹配CAM设计的TLB。

具体讨论链接：https://groups.google.com/a/groups.riscv.org/d/msg/hw-dev/T6IRGlQhs1o/oUUmaD19AwAJ

## 代码更新

## 安全点评

## 微群热点

## 实用资料

### RISC-V tokyo 的文档公开

RISC-V tokyo的文档公开了。许多公司像是 NSITEXE、Redhat 和 SHC 的演讲都很有趣，可以参考。

LINK: [RISC-V Day 2017 Tokyo](https://riscv.tokyo/2017/presentation-downloads/)

## 行业视角

## 市场相关


## CNRV社区活动

## CNRV网站更新


## 暴走事件

### 一月
+[BARC 2018](https://bostonarch.github.io/2018/) 2018年1月26在波士顿的Boston Area Architecture Workshop，有两场跟RISC-V有关的演讲。

### 二月

+ [FOSDEM'18](https://fosdem.org/2018/) 2018年2月3-4日，FOSDEM (Free and Open Source Developers’ European Meeting)将在比利时的布鲁塞尔举行。

+ [PULP WORKSHOP AT HPCA2018](http://pulp-platform.org/hpca2018) 2018年2月25日，在维也纳的HPCA中，会有一场跟Pulp 有关的workshop。PULP小组会介绍PULP最新的发展，和他们未来的走向，包括  PULP-CAPI (Coherent Accelerator Processor Interface) 和 Ariane （Next generation of 64-bit RISC-V implementations）等。详情可参考 pulpino mailing list 中的 < PULP newsletter - 4Q2017 >。

+ [Embedded World 2018](http://www.embedded-world.eu/program.html) 2018年2月27日，在德国 Nuremberg 的 Embedded world会有一整天跟risc-v有关的演讲。包括 Microsemi, Mentor Graphics等公司都会给演讲。AMD的CTO Mark Papermaster 也会给一个 Conference Keynote。

### 五月
+ [8th risc-v workshop](https://riscv.org/workshops/) 第八次risc-v workshop将在5月7-10日在西班牙举办。

## 招聘简讯

_CNRV提供为行业公司提供公益性质的一句话的招聘信息发布，若有任何体系结构、IC设计、软件开发的招聘信息，欢迎联系我们！_

----

整理编集: 宋威、黄柏玮、郭雄飞


----

**欢迎关注微信公众号CNRV，接收最新最时尚的RISC-V讯息！**

![CNRV微信公众号](/assets/images/cnrv_qr.png)

----

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/cn/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a>进行许可。

