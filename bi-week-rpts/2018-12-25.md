---
layout: default
---

# RISC-V 双周简报 (2018-12-25)

要点新闻：

## RV新闻

## 技术讨论

### Spike 的 TLB 刷新

Spike (riscv-isa-sim) 在 RISC-V 的 compliance test-suite 完成之前，是 RISC-V 指令集的规范实现(Golden Model)。
一些 RISC-V 研究者必然会使用 Spike 来研究 RISC-V 指令集。 然而，Spike 毕竟只是一个指令级别的仿真器，而并非一个处理器实现，不能完全通过 Spike 来猜测实际 RISC-V 处理器的行为。
比如，最近有人问，为什么 Spike 会频繁刷新 TLB 呢，很多 TLB 的刷新都是不必要的啊？

其实，Spike 的 TLB 并不是真实的硬件 TLB，而是一个软件的地址翻译缓存，将 RISC-V 的地址直接翻译成仿真主机的虚拟内存地址，从而避免仿真过程中的内存权限检查、硬件TLB查找、页表查询等等。
实际上，Spike 的行为级缓存也只是缓存访问的统计单元，并不真实存储任何缓存数据，而不支持任何一致性操作。

由于 Spike 的 TLB 绕过了权限检查，Spike 需要在执行权限改变、 修改 MSTATUS CSR 和修改 SATP CSR 时刷新 TLB。

在执行权限修改时，由于不同优先级可使用不同的虚拟空间（甚至关闭虚拟内存），TLB 中保存的地址翻译可能失效。

在修改 MSTATUS CSR 时，对于页表特权比特的解释可能通过 MXR, MPRV+MPP 等配置组合改变，因而也需要刷新 TLB。

在修改 SATP CSR 时，虚拟地址可以在 Sv32/Sv39/Sv48/Bare 之间变化，因而也会导致 TLB 失效。

* 具体参见 Andrew 的回复 [[hw-dev](https://groups.google.com/a/groups.riscv.org/d/msg/hw-dev/VCvfFVD87ls/axlzznzUBgAJ)]。

## 代码更新

## 安全点评

## 微群热点

## 实用资料

## 行业视角

## 市场相关

## CNRV社区活动

## CNRV网站更新

## 会议征稿

## 暴走事件

### 2019年3月

- 2019年3月12-14日 [RISC-V Taiwan Workshop](https://tmt.knect365.com/risc-v-workshop-taiwan/)将在新竹举办。

### 2019年6月

- 2019年6月10日 RISC-V Zurich Workshop将在瑞士苏黎世举办。

## 招聘简讯

_CNRV提供为行业公司提供公益性质的一句话的招聘信息发布，若有任何体系结构、IC设计、软件开发的招聘信息，欢迎联系我们！_

----

整理编集: 宋威、黄柏玮、汪平、林容威、傅炜、廖巍巍、郭雄飞、黄玮、李健

----

**欢迎关注微信公众号CNRV，接收最新最时尚的RISC-V讯息！**

![CNRV微信公众号](/assets/images/cnrv_qr.png)

----

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/cn/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a>进行许可。



