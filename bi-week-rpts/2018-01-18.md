---
layout: default
---

# RISC-V 双周简报 (2018-01-18)

要点新闻：


## RV新闻

### DornerWorks 获得 DARPA SBIR 的合约，得以发展 seL4 Microkernel 的 risc-v port
DornerWorks 最近获得 DAPRA SBIR的合约，得以和其伙伴Draper一起发展 Inherently Secure Processor 和其对应的 RISC-V port。

DornerWorks 新闻的连结：[link](http://dornerworks.com/news/darpa-sbir-risc-v-sel4-microkernel)

Draper 使用RISC-V发展 Inherently Secure Processor 的新闻：[link](http://www.draper.com/news/draper-awarded-contract-98-million-cyber-security-and-trusted-computing-protection)

### Google非官方开源新的 RISC-V IP核: “BottleRocket”

BottleRocket是RISCV RV32IMC的实现。

Google在2017年11月29日在Github上非官方开源了BottleRocket的RTL代码，使用Chisel编写：[link](https://github.com/google/bottlerocket)

BottleRocket实现了32bit的RV32IMC ISA，特权指令集版本为v1.10，拥有Machine和User两种特权模式，支持压缩指令集(RVC)。它采用经典的三级流水线架构，与Z-Scale和V-Scale的微结构类似。对于打算从ARM迁移到RISCV的人又是一个好消息，因为它使用AMBA AXI4Lite总线，预计ARM AMBA下的多种IP可以比较方便与其整合，不需要Tilelink2AXI桥。

与UCB的Rocket Chip比较而言，BottleRocket显得更加简单直接。其最初发布的版源代码引用了部分Rocket Chip的组件，实现部分仅有11个源码文件。

或许是刚刚发布不久的关系，BottleRocket默认选项编译出的Verilog代码似乎没有对FPGA进行优化，逻辑层数很深。默认配置是16周期乘法器，对数字信号处理不友好。总共使用约26k个门，对于一个三级流水线的处理器而言已经不错了。

- Albert Magyar 在 7th workshop的介绍：[Rocket Engines: Low-Effort Design Reuse in RISC-V Implementations](https://riscv.org/2017/12/7th-risc-v-workshop-proceedings/)

(特别感谢 黄锐 的整理和介绍)

## 開源硬件更新

### lowRISC 发布带100M以太网支持的第5版

lowRISC是一个由英国剑桥大学的研究人员成立的非盈利组织，致力于提供基于RISC-V的多核处理器平台。现在支持使用Rocket-Chip核PULPino的多核系统。
最近lowRISC发布了其第五版代码，编号为[ethernet-v0.5](https://github.com/lowRISC/lowrisc-chip/tree/ethernet-v0.5)。
该版本包含了一个开源的以太网MAC模块，并支持了网络启动核网络文件系统。
具体的描述请参见第五版的用户指导：http://www.lowrisc.org/docs/ethernet-v0.5/

## 開源軟件更新

### glibc 的 risc-v port v4
Palmer最近提交了第四版的glibc port，并希望之后不会再有Linux ABI的变动。希望这个port 能准时赶上2月1日的glibc 2.27发布。错过了就要再等半年了....
> From Palmer

> It's been a bit more than two weeks since the last patch set, and I think we're

> starting to get something that's in reasonable shape.  Thanks to Darius for

> putting in a lot of time into the v4.  We've also gotten the test suite in a

> bit better shape: we're down to 200 failures when running natively on Linux,

> and all the test suite failures when running in user mode emulate appear to be

> environment issues.  As far as I know the only remaining issue in our port is

> to triage the test suite failures, most of which we're hoping are just

> deficiencies in our current environment.  Of course, now that I've said that

> I'm sure we'll find a bunch of bugs all over the place :)

- ABI 讨论连结：[link](https://groups.google.com/a/groups.riscv.org/forum/#!topic/sw-dev/MW7AVBBfnms)
- glibc port v4 连结：[link](https://sourceware.org/ml/libc-alpha/2018-01/msg00475.html)

### QEMU的 risc-v port v2 和 v3
Michael Clark最近提交了第二版和第三版的qemu port。这两版主要是bug的修正，还没有加进更多的功能。

>From Michael:

>This patch series has major clean ups to target/riscv. There may be

>some feedback that has been missed however the changelog is growing

>quite large so we have decided to respin the patch series. No new

>features have been added however a number of bugs have been fixed.

- QEMU port v3 连结：[link](http://lists.nongnu.org/archive/html/qemu-devel/2018-01/msg01987.html)

### 第二次針對 Fedora/RISC-V bootstrap的結果

随着Linux ABI 逐渐固定下来，最近Richard 针对Fedora/RISC-V 做了第二次bootstrap，不过还没完成stage4。

> Steps of bootstrapping made by Richard W.M. Jones:

> stages 1 & 2: QEMU and cross-compiler are built from riscv-qemu and

> riscv-tools.

> https://github.com/rwmjones/fedora-riscv-bootstrap/blob/1858bd496378ddcce88a63c5ceda5483d7b4fdbe/Makefile#L21

> https://github.com/rwmjones/fedora-riscv-bootstrap/blob/1858bd496378ddcce88a63c5ceda5483d7b4fdbe/Makefile#L71

> stage 3: We build a minimal Fedora/x86_64 chroot and remove all x86_64

> ELF binaries and libraries.  Using the hosted cross-compiler we build

> RISC-V binaries and libraries and to replace the x86 ones.  We then

> build a disk image from the chroot (it has many other hacky aspects to

> it) and boot it under qemu.
https://github.com/rwmjones/fedora-riscv-bootstrap/blob/1858bd496378ddcce88a63c5ceda5483d7b4fdbe/Makefile#L117

> The stage 3 disk image is just enough to run ‘rpmbuild’ and ‘gcc’ and

> a small handful of other tools, which is just enough to build RPMs.

> https://github.com/rwmjones/fedora-riscv-bootstrap/blob/1858bd496378ddcce88a63c5ceda5483d7b4fdbe/Makefile#L1386

> stage 4: Using only RPMs generated from stage 3 we build a pristine

> disk image.  This disk image contains only files controlled by RPMs

> [actually there are two additional files needed: /init and a poweroff

> binary, both eventually will be replaced by systemd].

> https://github.com/rwmjones/fedora-riscv-bootstrap/blob/1858bd496378ddcce88a63c5ceda5483d7b4fdbe/Makefile#L1420

- 连结：[Status of the second bootstrap of Fedora/RISC-V](https://groups.google.com/a/groups.riscv.org/forum/#!topic/sw-dev/Di_vi1dD6-o)

## 技术讨论

### 使用PMA来控制物理内存区间内对非对齐的内存操作核原子操作的控制

在12月21日的简报中我们提及了关于“使用硬件支持非对齐内存访问的处理器必须支持对非对齐地址的原子操作”的争议。
现在看来，物理内存空间的属性标志已经较好地规定了一个物理空间上对非对齐操作的处理。
具体来说：

* 如果PMA规定禁止非对齐操作，所有的非对齐操作都会引发访问异常(access exception)。
* 如果PMA规定禁止非对齐原子操作，非对齐原子操作将会触发存储异常(store access exception)。
  非对齐的一般内存操作仍然被允许，可被硬件已非原子方式执行或陷入软件处理。
* 如果PMA规定允许非对齐原子操作，所有的非对齐内存访问都由硬件完成。
* 如果PMA规定允许非对齐原子操作，但是硬件不支持，则会触发非对齐地址异常，陷入软件处理。
* 也可以是上两种的混合。

Andrew Waterman的原文：https://groups.google.com/a/groups.riscv.org/d/msg/isa-dev/J1udFtmPEwI/RtHERGbSBAAJ

## 代码更新

## 安全点评

## 微群热点

## 实用资料

### RISC-V debug spec的介绍
HelloWorld 最近在 IT 铁人赛上连载了一系列关于risc-v  debug spec 和openocd的文章。有兴趣研究debug spec 和其openocd实作的可以参考。另外，NonerKao也在铁人赛上连载了一系列关于risc-v assembly 的文章。对于elf,nn,as 或是相关工具有兴趣的朋友可以看看。

连结1：[关于 debug spec的文章] (https://ithelp.ithome.com.tw/articles/10195208)

连结2: [关于 risc-v assembly 的文章](https://ithelp.ithome.com.tw/articles/10195213)

### 芯片编译公众号的开篇——RISC-V Tools编译安装三部曲
李浩同学在这个公众号中手把手的介绍了怎么编译与安装risc-v tools。不过小编还是期待有好心人能早日释出pre-built版本啊，最好是能用apt-get isntall就拿到更好 : )
连结：

- [part1](http://mp.weixin.qq.com/s/8CAt_yzvKJqTQQjx5Y0kPA)
- [part2](http://mp.weixin.qq.com/s/174itjgvFS1_ptPUTK9tTQ)
- [part3](http://mp.weixin.qq.com/s/z90DqX9lG0fYowZZXoS1Cw)

## 行业视角

## 市场相关


## CNRV社区活动

## CNRV网站更新

- [76893ca](https://github.com/cnrv/home/commit/76893ca806371020d4a3f6e39b3e6f3beda612f3) 加上Debian, Fedora, C libraries的资料

## 暴走事件



### 二月

+ [FOSDEM'18](https://fosdem.org/2018/) 2018年2月3-4日，FOSDEM (Free and Open Source Developers’ European Meeting)将在比利时的布鲁塞尔举行。

+ [PULP WORKSHOP AT HPCA2018](http://pulp-platform.org/hpca2018) 2018年2月25日，在维也纳的HPCA中，会有一场跟Pulp 有关的workshop。PULP小组会介绍PULP最新的发展，和他们未来的走向，包括  PULP-CAPI (Coherent Accelerator Processor Interface) 和 Ariane （Next generation of 64-bit RISC-V implementations）等。详情可参考 pulpino mailing list 中的 < PULP newsletter - 4Q2017 >。

+ [Embedded World 2018](http://www.embedded-world.eu/program.html) 2018年2月27日，在德国 Nuremberg 的 Embedded world会有一整天跟risc-v有关的演讲。包括 Microsemi, Mentor Graphics等公司都会给演讲。AMD的CTO Mark Papermaster 也会给一个 Conference Keynote。


## 招聘简讯

_CNRV提供为行业公司提供公益性质的一句话的招聘信息发布，若有任何体系结构、IC设计、软件开发的招聘信息，欢迎联系我们！_

----

整理编集: 宋威、黄柏玮、郭雄飞
特別感謝：黃銳

----

**欢迎关注微信公众号CNRV，接收最新最时尚的RISC-V讯息！**

![CNRV微信公众号](/assets/images/cnrv_qr.png)

----

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/cn/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a>进行许可。

